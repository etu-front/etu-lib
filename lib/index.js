module.exports=function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=5)}([function(e,n){e.exports=require("react")},function(e,n){e.exports=require("styled-components")},function(e,n){e.exports=require("prop-types")},function(e,n){e.exports=require("antd")},function(e,n){e.exports=require("react-lazyload")},function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r),o=t(1),a=t.n(o),l=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c=d(["\n  align-items: stretch;\n  justify-content: flex-start;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  font: inherit;\n  text-align: inherit;\n  text-decoration: none;\n  list-style: none;\n  pointer-events: auto;\n"],["\n  align-items: stretch;\n  justify-content: flex-start;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  font: inherit;\n  text-align: inherit;\n  text-decoration: none;\n  list-style: none;\n  pointer-events: auto;\n"]),s=d(["\n  align-items: center !important;\n  justify-content: center !important;\n"],["\n  align-items: center !important;\n  justify-content: center !important;\n"]);function d(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var u=a.a.div(c),p=function(e){var n=e.className,t=e.children,r=e.align,o=e.justify,a=e.column,c=void 0!==a&&a,s=e.wrap,d=void 0!==s&&s,p=e.row,f=void 0!==p&&p,m=e.radius,h=e.height,g=e.background,y=e.color,b=e.flex,v=e.width,x=e.style,w=function(e,n){var t={};for(var r in e)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}(e,["className","children","align","justify","column","wrap","row","radius","height","background","color","flex","width","style"]),k={};return f&&(k.flexDirection="row"),c&&(k.flexDirection="column"),k.flexDirection&&"row"===k.flexDirection&&(k.alignItems="flex-start"),r&&(k.alignItems=r),o&&(k.justifyContent=o),d&&(k.flexWrap="wrap"),b&&(k.flex=b),void 0!==v&&(k.width=v),void 0!==h&&(k.height=h),g&&(k.background=g),void 0!==y&&(k.color=y),m&&(k.borderRadius=m),x&&(k=l({},k,x)),i.a.createElement(u,l({className:n,style:Object.keys(k)?k:null},w),t)};p.displayName="View",(p.Center=a()(p)(s)).displayName="View.Center";var f=p,m=t(3),h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var g=["ai","attachment","audio","box-notes","csv","eps","excel"];g.push("exe","flash","doc","gpres","gsheet","html","image","keynote"),g.push("link","mp4","overlay","pack","pages","pdf","ppt","psd","rtf"),g.push("slide","stypi","txt","video","visio","webex","word","xml","zip");var y=m.Icon.createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_922089_bk9l48330b8.js"}),b=function(e){var n=e.style,t=void 0===n?{}:n,r=e.size,o=void 0===r?50:r,a=e.type,l=function(e,n){var t={};for(var r in e)n.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}(e,["style","size","type"]),c=function(e){var n=e.toLowerCase();return["doc","docx"].includes(n)?"word":["ppt","pptx"].includes(n)?"ppt":g.indexOf(n)>=0?n:["mp3","wav","ape","flac","wma"].includes(n)?"audio":["mov","ogg","avi","rmvb","flv","wmv","asf"].includes(n)?"video":"unknown"}(a);return i.a.createElement(y,h({type:"icon-"+c,style:h({},t,{fontSize:o})},l))};b.displayName="FileIcon";var v=b,x=t(2),w=t.n(x),k=t(4),j=t.n(k),E=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),O=M(["\n  color: white;\n  font-size: 28px;\n  align-self: center;\n  margin: 0 auto;\n  &:hover {\n    color: #eee;\n  }\n"],["\n  color: white;\n  font-size: 28px;\n  align-self: center;\n  margin: 0 auto;\n  &:hover {\n    color: #eee;\n  }\n"]),C=M(["\n  clear: both;\n  margin: 0 -","px;\n  list-style: none;\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n"],["\n  clear: both;\n  margin: 0 -","px;\n  list-style: none;\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n"]),_=M(["\n  &.ant-card {\n    margin: ",";\n    overflow: hidden;\n    border-color: #d5d4d4;\n    border-radius: 4px;\n    background: ",";\n    position: relative;\n    display: flex;\n    align-items: ",";\n    justify-content: center;\n  }\n  .ant-card-body {\n    padding: ",";\n    text-align: center;\n    cursor: pointer;\n  }\n"],["\n  &.ant-card {\n    margin: ",";\n    overflow: hidden;\n    border-color: #d5d4d4;\n    border-radius: 4px;\n    background: ",";\n    position: relative;\n    display: flex;\n    align-items: ",";\n    justify-content: center;\n  }\n  .ant-card-body {\n    padding: ",";\n    text-align: center;\n    cursor: pointer;\n  }\n"]),z=M(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  padding: 0 5px;\n  bottom: ",";\n  height: 20px;\n  font-size: 12px;\n  line-height: 20px;\n  color: ",";\n  background: ",";\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-align: center;\n"],["\n  position: absolute;\n  left: 0;\n  right: 0;\n  padding: 0 5px;\n  bottom: ",";\n  height: 20px;\n  font-size: 12px;\n  line-height: 20px;\n  color: ",";\n  background: ",";\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-align: center;\n"]),P=M(["\n  position: absolute;\n  right: 2px;\n  top: 2px;\n  color: red;\n  cursor: pointer;\n  .anticon-iconfont {\n    font-size: 18px;\n  }\n"],["\n  position: absolute;\n  right: 2px;\n  top: 2px;\n  color: red;\n  cursor: pointer;\n  .anticon-iconfont {\n    font-size: 18px;\n  }\n"]);function D(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function M(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var S=a()(m.Icon)(O),N=function(e){var n=e.thumbnail,t=e.width,r=e.height,o=e.backgroundColor,a=void 0===o?"#F0F0F0":o,l=e.icon;return i.a.createElement("div",{style:{backgroundImage:"url("+n+")",backgroundSize:"cover",backgroundPosition:"center",display:"flex",width:t,height:r,margin:"0 auto",maxWidth:"100%",backgroundColor:a}},l)},I=a.a.div(C,function(e){return e.margin});I.Item=a()(m.Card)(_,function(e){return e.margin+"px"},function(e){return e.background},function(e){return e.fixed?"center":"flex-start"},function(e){return e.fixed?0:"18px 22px"}),I.Item.displayName="ListItem",I.Name=a.a.div(z,function(e){return e.fixed?0:"10px"},function(e){return e.fixed?"#fff":"#787878"},function(e){return e.fixed?"#33333399":"transparent"});var F=function(e){var n=e.name,t=e.fixed;return i.a.createElement(I.Name,{fixed:t?1:0},i.a.createElement(m.Tooltip,{title:n.length<20?"":n,placement:"topLeft"},n))},T=a.a.div(P),L=function(e){function n(){var e,t,r;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return t=r=D(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),r.handleRemoveItem=function(e,n){n.preventDefault(),n.stopPropagation(),r.props.onDelete&&r.props.onDelete(e)},r.onClick=function(e,t){var i=e[t];if("picture"!==i.type&&"video"!==i.type){var o=window.document.createElement("a");o.href=r.props.pdfPrevView&&"pdf"===i.type?n.getFile(i.data||i.media_id):n.getDownload(i.data||i.media_id),o.target="_blank",document.body.appendChild(o),o.click(),setTimeout(function(){document.body.removeChild(o)},0)}else r.props.onClick&&r.props.onClick(e,t)},r.renderMediaNode=function(e){var t,o=r.props,a=o.width,l=o.height,c=o.lazyLoad,s=o.fixed,d=e.media_id,u=e.type,p=a/(s?1:1.8),f=l/(s?1:2.5);if(t=n.getThumbnail(d,a,l),"video"===u||"picture"===u){var m=i.a.createElement(N,{thumbnail:t,width:p,height:f,icon:"video"===u&&i.a.createElement(S,{type:"play-circle"})});return c?i.a.createElement(j.a,{height:l,offset:50,once:!0},m):m}return i.a.createElement(v,{type:u,size:s?a/2:f,style:{margin:"0 auto"}})},D(r,t)}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,r["PureComponent"]),E(n,[{key:"render",value:function(){var e=this,t=this.props,r=t.items,o=t.margin,a=t.bordered,l=t.background,c=t.noName,s=t.fixed,d=t.width,u=t.height,p=t.hasDeleteButton,f=void 0!==p&&p;return i.a.createElement(I,{margin:o},r.map(function(t,p){var h=!c&&n.getFileName(t);return i.a.createElement(I.Item,{onClick:e.onClick.bind(null,r,p),key:t.media_id+"_"+p,bordered:a&&!c,style:{width:d,height:u},fixed:s?1:0,margin:o,background:l},e.renderMediaNode(t),f&&i.a.createElement(T,{onClick:e.handleRemoveItem.bind(null,t.media_id)},i.a.createElement(m.Icon,{type:"delete"})),h&&i.a.createElement(F,{fixed:s,name:h}))}))}}]),n}();L.displayName="MediaList",L.propTypes={items:w.a.array.isRequired,noName:w.a.bool,margin:w.a.number,bordered:w.a.bool,onDelete:w.a.func,hasDeleteButton:w.a.bool,pdfPrevView:w.a.bool,lazyLoad:w.a.bool,onClick:w.a.func},L.defaultProps={items:[],background:"transparent",width:100,height:100,margin:5,bordered:!0,noName:!0,pdfPrevView:!1,lazyLoad:!0},L.getThumbnail=function(e,n,t){},L.getFile=function(e){},L.getDownload=function(e){},L.bindGetFileFunctions=function(e){var n=e.getThumbnail,t=e.getFile,r=e.getDownload;L.getFile=t,L.getThumbnail=n,L.getDownload=r},L.getFileName=function(e){return e.name?e.name:e.extra&&e.extra.attrs?e.extra.attrs.file_name:void 0};var R=L,V=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),H=Q(["\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 9999;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n"],["\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  z-index: 9999;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n"]),A=Q(["\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  z-index: 1;\n  text-align: right;\n"],["\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  z-index: 1;\n  text-align: right;\n"]),G=Q(["\n  flex: 1;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  position: relative;\n"],["\n  flex: 1;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  user-select: none;\n  position: relative;\n"]),K=Q(["\n  width: 100px;\n  min-width: 100px;\n  height: 100%;\n  overflow-y: auto;\n  padding: 10px;\n  background: rgba(0, 0, 0, 0.3);\n  li {\n    height: 80px;\n    background-size: cover !important;\n    margin-top: 8px;\n    text-align: center;\n  }\n  .onSelected {\n    outline: 3px solid #fff;\n  }\n"],["\n  width: 100px;\n  min-width: 100px;\n  height: 100%;\n  overflow-y: auto;\n  padding: 10px;\n  background: rgba(0, 0, 0, 0.3);\n  li {\n    height: 80px;\n    background-size: cover !important;\n    margin-top: 8px;\n    text-align: center;\n  }\n  .onSelected {\n    outline: 3px solid #fff;\n  }\n"]),B=Q(["\n  color: #fff;\n  transition: opacity 0.1s;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.8);\n  opacity: 0.8;\n  font-size: 30px;\n  &:hover {\n    color: #fff;\n    opacity: 1;\n  }\n  cursor: pointer;\n"],["\n  color: #fff;\n  transition: opacity 0.1s;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.8);\n  opacity: 0.8;\n  font-size: 30px;\n  &:hover {\n    color: #fff;\n    opacity: 1;\n  }\n  cursor: pointer;\n"]),U=Q(["\n  position: absolute;\n  display: flex;\n  align-items: center;\n  width: 20%;\n  height: 100%;\n  font-size: 36px;\n"],["\n  position: absolute;\n  display: flex;\n  align-items: center;\n  width: 20%;\n  height: 100%;\n  font-size: 36px;\n"]);function J(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function Q(e,n){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var X=a()(f)(H),Y=a.a.div(A),Z=a()(f)(G),$=a()(f)(K),ee=a.a.a(B),ne=a()(ee)(U),te=function(e){function n(){var e,t,r;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r=J(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(o))),r.state={current:r.props.current,visible:r.props.visible},r.onKeyDown=function(e){if(r.props.medias&&!(r.props.medias.length<1))return 37===e.keyCode||38===e.keyCode?(e.preventDefault(),e.stopPropagation(),r.prevMedia()):39===e.keyCode||40===e.keyCode?(e.preventDefault(),e.stopPropagation(),r.nextMedia()):27===e.keyCode&&r.handleClose(),!1},r.getMedia=function(e){var n=r.props.medias[e];if("object"===q(n.extra))return n;var t={};try{(t=JSON.parse(n.extra)).attrs&&(t=t.attrs)}catch(e){t={}}return V({},n,{extra:t})},r.handleClose=function(){r.props.onClose&&r.props.onClose()},r.handleChange=function(e){r.setState({current:e})},r.prevMedia=function(){if(r.props.sidebar){var e=r.state.current-1;0===r.state.current&&(e=r.props.medias.length-1),r.handleChange(e)}},r.nextMedia=function(){if(r.props.sidebar){var e=0;r.state.current!==r.props.medias.length-1&&(e=r.state.current+1),r.handleChange(e)}},J(r,t)}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,r["Component"]),W(n,[{key:"componentDidUpdate",value:function(e){this.props.visible&&!e.visible&&(document.addEventListener("keydown",this.onKeyDown,!1),document.body.style.overflow="hidden"),!this.props.visible&&e.visible&&(document.body.style.overflow="",document.removeEventListener("keydown",this.onKeyDown))}},{key:"renderDownloadIcon",value:function(e){return this.props.canDownload?i.a.createElement(ee,{as:"a",href:n.getDownload(e.media_id),rel:"noopener noreferrer",target:"_blank",download:!0,style:{marginRight:20}},i.a.createElement(m.Icon,{type:"download",size:32})):"picture"!==e.type&&"video"!==e.type?i.a.createElement(ee,{as:"a",href:n.getFile(e.media_id),rel:"noopener noreferrer",target:"_blank",style:{marginRight:20}},i.a.createElement(m.Icon,{type:"eye",size:32})):i.a.createElement(ee,{as:"a",style:{marginRight:20}}," ")}},{key:"renderCurrentMedia",value:function(){var e=this,t=this.currentMedia,r=this.isMultiple?80:40,o=window.document.body.clientWidth-r,a=window.document.body.clientHeight-20,l=t.media_id,c=t.type,s=n.getFile(l);return i.a.createElement(f,{flex:1,className:"relative"},i.a.createElement(Y,null,this.renderDownloadIcon(t),i.a.createElement(ee,{onClick:this.handleClose},i.a.createElement(m.Icon,{type:"close-circle",theme:"filled"}))),i.a.createElement(Z,{onClick:this.isMultiple?void 0:function(n){"VIDEO"!==n.target.tagName&&"IMG"!==n.target.tagName&&e.handleClose()}},this.isMultiple&&this.props.sidebar&&i.a.createElement(ne,{onClick:this.prevMedia,style:{justifyContent:"flex-start",left:0}},i.a.createElement(m.Icon,{type:"left"})),i.a.createElement("div",{style:{maxWidth:o,maxHeight:a,textAlign:"center",width:"100%"}},"picture"===c&&i.a.createElement("img",{key:s,src:s+"thumbnail/",style:{maxHeight:a,maxWidth:"100%"},alt:s}),"video"===c&&i.a.createElement("video",{key:s,src:s,controls:!0,autoPlay:!0,controlsList:"nodownload",style:{maxHeight:a,maxWidth:"calc(100% - 40%)"}}),"picture"!==c&&"video"!==c&&i.a.createElement("a",{href:n.getFile(t.media_id),rel:"noopener noreferrer",target:"_blank"},i.a.createElement(f,{align:"center"},i.a.createElement(v,{type:c,size:100}),i.a.createElement("p",{className:"t-white m-t-20 f18"},t.name)))),this.isMultiple&&this.props.sidebar&&i.a.createElement(ne,{onClick:this.nextMedia,style:{justifyContent:"flex-end",right:0}},i.a.createElement(m.Icon,{type:"right"}))))}},{key:"render",value:function(){var e=this,t=this.props,r=t.medias,o=t.sidebar;return this.props.visible?i.a.createElement(X,{row:!0,align:"stretch"},this.renderCurrentMedia(),o&&r.length>1&&i.a.createElement($,null,i.a.createElement("ul",null,r.map(function(t,r){var o=e.getMedia(r);if("video"===o.type||"picture"===o.type){var a=n.getThumbnail(o.media_id,160,160);return i.a.createElement("li",{key:o.media_id,className:r===e.state.current?"onSelected":"",title:o.name,style:{background:"url("+a+") center no-repeat"},onClick:e.handleChange.bind(null,r)})}return i.a.createElement("li",{key:o.media_id,className:r===e.state.current?"onSelected":"",title:o.name,onClick:e.handleChange.bind(null,r)},i.a.createElement(v,{type:o.type,size:50,style:{margin:"0 auto",paddingTop:10}}))})))):null}},{key:"currentMedia",get:function(){return this.getMedia(this.state.current)}},{key:"isMultiple",get:function(){return this.props.medias.length>1}}],[{key:"getDerivedStateFromProps",value:function(e,n){return e.visible&&!n.visible?{current:e.current,visible:e.visible}:null}}]),n}();te.displayName="SlideShow",te.propTypes={visible:w.a.bool,mediaSize:w.a.number,onClose:w.a.func,medias:w.a.array,current:w.a.number},te.defaultProps={visible:!1,medias:[],mediaSize:600,current:0},te.getThumbnail=function(e,n,t){},te.getFile=function(e){},te.getDownload=function(e){},te.bindGetFileFunctions=function(e){var n=e.getThumbnail,t=e.getFile,r=e.getDownload;te.getFile=t,te.getThumbnail=n,te.getDownload=r};var re=te;t.d(n,"View",function(){return f}),t.d(n,"FileIcon",function(){return v}),t.d(n,"MediaList",function(){return R}),t.d(n,"SlideShow",function(){return re})}]);